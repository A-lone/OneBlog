version: 1.0.0.{build}.{branch}
os: Visual Studio 2015

init:
- git config --global core.autocrlf true
- cmd: >-
    choco install dotnetcore

    set PATH=C:\Program Files\dotnet\bin;%PATH%

nuget:
  account_feed: true
  
services:
  - mssql2014

cache:
  - '%APPDATA%\npm-cache'             # npm cache
  
install:
 - cmd: nuget sources add -Name api.nuget.org -Source https://api.nuget.org/v3/index.json
 
before_build:
 - cmd: dotnet restore ./src/One.Data
 - cmd: dotnet restore ./src/One
 - cmd: npm install
 - cmd: gulp bower -g

build_script:
 - cmd: dotnet build ./src/One.Data
 - cmd: dotnet build ./src/One


